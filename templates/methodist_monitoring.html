{% extends 'base.html' %} 

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center;">
  <select name="block" id="block" class="custom-select">
    <option value="1" {% if request.GET.block == "1" %}selected{% endif %}>1-ші блок</option>
    <option value="2" {% if request.GET.block == "2" %}selected{% endif %}>2-ші блок</option>
  </select>

  {% if request.user.is_authenticated %}
    <a href="{% url 'upload' %}" class="contact">
      Құжаттарды еңгізу
    </a>
  {% endif %}
</div>

<table>
  <tbody>
    <tr class="table-head">
      <th>Құжатың атауы</th>
      <th>Жылы</th>
      <th>Жүктеу</th>
    </tr>
    {% for file in files %}
    <tr>
      <td>{{ file.name }}</td>
      <td>{{ file.year }}</td>
      <td>
        <a href="{{ file.file.url }}" download> <button>Скачать</button></a>
        {% if request.user.is_authenticated %}
        <a href="{% url 'delete_file' file.id %}"><button class="delete_file">Жою</button></a>
        <a href="{% url 'update_file' file.id %}"><button class="update_file">Жаңарту</button></a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
    <tr>
      <td colspan="3">
          {% if page_obj.has_previous %}
            <a href="?page={{page_obj.previous_page_number}}" style="color: #5454d4; text-decoration: none; font-size: 24px; font-weight: 900;"><</a>
          {% endif %}
          <span style="margin-inline: 15px;">{{page_obj.number}} бет {{page_obj.paginator.num_pages}} беттен</span>
          {% if page_obj.has_next %}
            <a href="?page={{page_obj.next_page_number}}" style="color: #5454d4; text-decoration: none; font-size: 24px; font-weight: 900;">></a>
          {% endif %}
      </td>
  </tr>
  </tbody>
</table>

{% endblock %}


{% block script %}
<script>
  document.getElementById("block").addEventListener("change", function () {
    var selectedValue = this.value;
    window.location.href = "?block=" + selectedValue;
  });
</script>
{% endblock %}
