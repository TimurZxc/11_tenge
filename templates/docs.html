{% extends 'base.html' %} 

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center;">
  <select name="block" id="block" class="custom-select">
    <option value="1" {% if request.GET.block == "1" %}selected{% endif %}>1-ші блок</option>
    <option value="2" {% if request.GET.block == "2" %}selected{% endif %}>2-ші блок</option>
  </select>

  {% if request.user.is_authenticated %}
    <a href="{% url 'upload' %}?next={{ request.path }}" class="contact">
      Құжаттарды еңгізу
    </a>
  {% endif %}
</div>

<table>
  <tbody>
    <tr class="table-head">
      <th>Құжатың атауы</th>
      <th>Жылы</th>
      <th>Жүктеу</th>
    </tr>
    {% block links %}
    <tr>
      <td colspan="3"><a href="{% url '2020-2021' %}">2020-2021 ж</a></td>
    </tr>
    {% endblock %}
    
    
    {% for file in files %}
    <tr>
      <td><a href="{{ file.file.url }}" target="_blank">{{ file.name }}</a></td>
      <td>{{ file.year }}</td>
      <td>
        <a href="{{ file.file.url }}" download> <button><i class="fa-solid fa-download"></i></button></a>
        {% if request.user.is_authenticated %}
        <a href="{% url 'update_file' file.id %}?next={{ request.path }}&page={{ request.GET.page }}"><button class="update_file"><i class="fa-solid fa-pencil"></i></button></a>
        <a href="{% url 'delete_file' file.id %}?next={{ request.path }}&page={{ request.GET.page }}"><button class="delete_file"><i class="fa-solid fa-trash"></i></button></a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>


{% endblock %}


{% block script %}
<script>
  document.getElementById("block").addEventListener("change", function () {
    var selectedValue = this.value;
    window.location.href = "?block=" + selectedValue;
  });
</script>
{% endblock %}